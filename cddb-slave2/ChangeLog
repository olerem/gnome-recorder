2002-02-16  Iain <iain@ximian.com>

	* main.c (factory_fn): Use g_get_user_name.
	(cddb_check_cache): Try to load the entry from a file if it's not in
	the cache.
	(cddb_entry_new_from_file): Build a CDDBEntry from a file.
	(count_tracks): Count the tracks in the hash table.
	(cddb_entry_parse_file): Store the comments and the topline for
	saving.

2002-02-15  Iain <iain@ximian.com>

	* cddb-slave-capplet.c (update_clicked): Disable the update button.
	(do_goodbye_response): Enable the update button and reset the
	connection.
	(read_from_server): Enable the update button.
	(open_cb): Enable the update button.

2002-02-15  Iain <iain@ximian.com>

	* cddb-slave-capplet.c (server_selection_changed): Set the server to
	the newly selected one.
	(create_dialog): Hook up the selection

2002-02-14  Iain <iain@ximian.com>

	* main.c (get_username): Get the current username.
	(get_hostname): Get the hostname.
	(factory_fn): Get the name and hostname stuff from gconf.

	* cddb-slave.[ch] (do_hello): Use the name and hostname stuff instead
	of hardcoding it.
	(finalize): Free the name and hostname.
	(cddb_slave_new_full): Add the name and hostname args
	(cddb_slave_new): Ditto.

2002-02-12  Iain <iain@ximian.com>

	* Makefile.am (cddb_slave2_properties_SOURCES): Add all the gnet
	stuff.

	* cddb-slave-capplet.c: Include gnet.h. Define enums needed for the
	network stuff.
	(PropertyDialog): Add stuff for updating the model from the network.
	(do_goodbye): Network code.
	(do_goodbye_response): Ditto.
	(do_sites_response): Update the server list from the received data.
	(do_sites): Send the sites command.
	(do_hello_response): Network code.
	(do_hello): Do hello.
	(do_open_response): Network code.
	(read_from_server): Ditto.
	(open_cb): Ditto.
	(update_clicked): Start the network update
	(make_tree_model): Add a location column.
	(create_dialog): Put the list in a scrolled window.
	
2002-02-11  jacob berkman  <jacob@ximian.com>

	* Makefile.am (cddb_slave2_properties_SOURCES): this looks like C
	and not asm; fix typo

2002-02-10  Iain <iain@ximian.com>

	* CDDB-Slave2.schemas: Add the new schemas

	* Makefile.am: Build the capplet and make the desktop.

	* cddb-slave-capplet.c: A capplet to configure stuff.

2002-02-10  Iain <iain@ximian.com>

	* cddb-slave-client.c (cddb_slave_client_get_disc_title): Do the CORBA
	stuff for getDiscTitle.
	(cddb_slave_client_get_artist): Ditto.
	(cddb_slave_client_get_ntrks): Ditto.
	(cddb_slave_client_get_track_title): Ditto.
	(cddb_slave_client_get_tracks): Ditto.

	* cddb-slave.c (impl_GNOME_Media_CDDBSlave2_getAllTracks): Fix some
	issues.

2002-02-10  Iain <iain@ximian.com>

	* cddb-parser.c (cddb_entry_parse_file): fix typo.

	* cddb-slave.c (impl_GNOME_Media_CDDBSlave2_getAllTracks): Get all the
	track names.
	(cddb_slave_class_init): Connect the rest of the methods.

2002-02-10  Iain <iain@ximian.com>

	* cddb-slave.c (impl_GNOME_Media_CDDBSlave2_getDiscTitle): Fix for
	case where there's no / in the DTITLE.
	(impl_GNOME_Media_CDDBSlave2_getArtist): Fix for case where there's no
	/ in DTITLE

2002-02-10  Iain <iain@ximian.com>

	* cddb-parser.c (cddb_entry_new): Create a full hashtable.
	(cddb_entry_parse_file): Use g_strsplit to split the line, instead of
	nasty strchr hacks.
	
2002-02-10  Iain <iain@ximian.com>

	* GNOME_Media_CDDBSlave2.idl: Add some fun methods.

	* Makefile.am: Add cddb-parser.c

	* cddbs-alave.c: Add a cddb_cache.
	(remove_entry_from_cache): Remove the entry from the cache when
	something fails.
	(do_read_response): Parse the file into an entry.
	(everywhere): Disconnect on errors.
	(cddb_check_cache): Check the cddb_cache instead of the directory.
	(impl_GNOME_Media_CDDBSlave2_query): Create an Entry. Remove some
	debugging spew.
	(impl_GNOME_Media_CDDBSlave2_getArtist): Get the artists name.
	(impl_GNOME_Media_CDDBSlave2_getNTrks): Get NTrks.
	(impl_GNOME_Media_CDDBSlave2_getDiscTitle): Get disc name.
	(impl_GNOME_Media_CDDBSlave2_getTrackTitle): Get track title.
	(cddb_slave_init): Create a cddb_cache hash table.

	* cddb-slave.h: Make a CDDBEntry struct.
	
2002-02-03  Iain <iain@ximian.com>

	* cddb-slave.c (impl_GNOME_Media_CDDBSlave2_query): Initialise the tag
	to 0.
	(open_cb): Record the tag.
	(do_goodbye_response): Remove the tag.

2002-01-21  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c (cddb_check_cache): Memory leak.

2002-01-26  Gediminas Paulauskas <menesis@delfi.lt>

	* main.c: get translations in UTF-8

2002-01-18  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c: Remove some of the debugging crap.
	(do_read_response): If 409 is returned, call do_hello.
	(do_query_response): Ditto

2002-01-18  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c (do_open_response): Close the connection if we haven't
	been able to log on.

2002-01-18  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c (do_query_response): If response is 211, but only one
	match was returned, then just automatically select it.

2002-01-18  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c: Modularise the commands and the responses.
	(display_results): Create a GUI to display multiple results.
	(create_model_from_list): Create a GtkTreeModel from a list of
	vectors.
	(do_query_response): If the result code is 211, collect a list of
	vectors, and display them then free the list.

2002-01-17  Iain Holmes  <iain@ximian.com>

	* main.c (main): Init the GUI as well.

2002-01-17  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c: Doh, replace <gnet/gnet.h> with "gnet.h"

2002-01-16  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c: Rewrite using gnet functions, rather than just
	plain HTTP.

	* COPYING.LIB: Gnet code license

	* README.GNET: Readme about gnet.

	* gnet.h
	  gnet-private.[ch]
	  inetaddr.[ch]
	  iochannel.[ch]
	  socks.[ch]
	  socks-private.[ch]
	  tcp.[ch]: Files from gnet.

2002-01-11  Iain Holmes  <iain@ximian.com>

	* main.c (main): Register everything in an idle loop.

2001-12-02  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c (cddb_send_read): Update gnome_vfs_async_open.
	(cddb_send_cmd): Same.

2001-11-17  Iain Holmes  <iain@ximian.com>

	* cddb-slave-client.c: Replace CORBA_Object with GNOME_Media_CDDBSlave2
	(finalize): Destroy the objref if it is there.
	(cddb_slave_client_get_type): Replace GtkObjectInitFunc with
	GInstanceInitFunc.
	(cddb_slave_client_construct): Remove the #warning.

	* cddb-slave-client.h: Remove the bonobo-object-client.h include, add
	gobject.h
	Replace all the GTK_CHECK macros with G_TYPE ones.
	Replace BonoboObjectClient with GObject.
	Replace GtkType with GType.

2001-11-17  Iain Holmes  <iain@ximian.com>

	* cddb-slave.c: Remove gtk.h include

	* cddb-slave.h: Replace GtkType with GType and GTK_CHECK macros with
	the G_TYPE ones.

	* main.c: Replace bonobo.h with libbonobo.h
	(cddb_destroy_cb): Replace GtkObject with GObject and gtk_main_quit with
	bonobo_main_quit.
	(factory_fn): Add the component_id parameter. Replace GTK_SIGNAL_FUNC
	with G_CALLBACK.
	(main): Replace bonobo_ui_init with bonobo_init.
	
2001-11-17  Iain Holmes  <iain@ximian.com>

	* cddb-slave-client.c (cddb_slave_client_remove_listener): Correct the
	return type. Fix the inline docs too.

	* cddb-slave-client.h: Add some more function prototypes.

	* Makefile.am: Use the CDDBSLAVE link line

	* GNOME_Media_CDDBSlave2.idl: Add a Result enum and a QueryResult
	structure so that clients can get better error reporting.

	* cddb-slave.c (cddb_slave_notify_listeners): Take a result value as 
	well, and create a QueryResult structure to pass to the listeners.
	(cddb_close_data_cb): Pass the discid and result.
	(cddb_close_cb): Pass the discid and result.
	(cddb_open_cb): Pass the discid and result.
	(cddb_send_cmd): Pass the discid and result.
	(impl_GNOME_Media_CDDBSlave2_query): Pass the discid and result.
	
2001-11-03  Iain Holmes  <iain@ximian.com>

	* main.c (main): Updated for new glib-gettext
